# DNS lÃ  gÃ¬ ?
DNS viáº¿t táº¯t cá»§a Domain Name System cÃ³ nghÄ©a lÃ  há»‡ thá»‘ng phÃ¢n giáº£i tÃªn miá»n. DNS lÃ  há»‡ thá»‘ng cho phÃ©p thiáº¿t láº­p tÆ°Æ¡ng á»©ng giá»¯a Ä‘á»‹a chá»‰ IP vÃ  tÃªn miá»n trÃªn Internet.
DNS Ä‘Æ°á»£c phÃ¡t minh vÃ o nÄƒm 1984 cho Internet vÃ  Ä‘Ã¢y lÃ  má»™t trong sá»‘ cÃ¡c chuáº©n cÃ´ng nghiá»‡p cá»§a cÃ¡c cá»•ng bao gá»“m cáº£ TCP/IP. Há»‡ thá»‘ng phÃ¢n giáº£i tÃªn miá»n chÃ­nh lÃ  chÃ¬a khÃ³a chá»§ chá»‘t cá»§a nhiá»u dá»‹ch vá»¥ máº¡ng hiá»‡n nay nhÆ° Internet, Mail server, Web serverâ€¦

# Chá»©c nÄƒng cá»§a DNS dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?
DNS Ä‘Ã³ng vai trÃ² nhÆ° má»™t â€œbiÃªn dá»‹ch viÃªnâ€ giá»¯a tÃªn miá»n vÃ  Ä‘á»‹a chá»‰ IP. TÃªn miá»n lÃ  chuá»—i kÃ½ tá»± dá»… nhá»›, trong khi Ä‘á»‹a chá»‰ IP lÃ  chuá»—i sá»‘ khÃ³ nhá»›. DNS giÃºp chuyá»ƒn Ä‘á»•i tÃªn miá»n thÃ nh Ä‘á»‹a chá»‰ IP, tá»« Ä‘Ã³ giÃºp mÃ¡y tÃ­nh cÃ³ thá»ƒ truy cáº­p vÃ o cÃ¡c trang web trÃªn internet.

Má»—i mÃ¡y tÃ­nh khi káº¿t ná»‘i vÃ o Internet sáº½ Ä‘Æ°á»£c gÃ¡n cho 1 Ä‘á»‹a chá»‰ IP (VÃ­ dá»¥: 1414.1158.62462) riÃªng biá»‡t vÃ  khÃ´ng trÃ¹ng láº«n vá»›i báº¥t ká»³ mÃ¡y tÃ­nh nÃ o khÃ¡c trÃªn tháº¿ giá»›i. CÅ©ng giá»‘ng nhÆ° váº­y Ä‘á»‘i vá»›i website cÅ©ng cÃ³ Ä‘á»‹a chá»‰ IP riÃªng biá»‡t cá»§a website Ä‘Ã³.

# CÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cá»§a DNS
- Khi ngÆ°á»i dÃ¹ng truy cáº­p má»™t website, mÃ¡y tÃ­nh sáº½ gá»­i yÃªu cáº§u Ä‘áº¿n mÃ¡y chá»§ DNS cá»¥c bá»™ Ä‘á»ƒ tÃ¬m Ä‘á»‹a chá»‰ IP cá»§a website Ä‘Ã³. MÃ¡y chá»§ DNS cá»¥c bá»™ sáº½ kiá»ƒm tra cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»§a mÃ¬nh xem cÃ³ chá»©a Ä‘á»‹a chá»‰ IP cá»§a website hay khÃ´ng. Náº¿u cÃ³, sáº½ tráº£ vá» Ä‘á»‹a chá»‰ IP cho mÃ¡y tÃ­nh cá»§a ngÆ°á»i dÃ¹ng.
- QuÃ¡ trÃ¬nh phÃ¢n giáº£i DNS bao gá»“m chuyá»ƒn Ä‘á»•i tÃªn mÃ¡y chá»§ (cháº³ng háº¡n nhÆ° www.example.com) thÃ nh Ä‘á»‹a chá»‰ IP thÃ¢n thiá»‡n vá»›i mÃ¡y tÃ­nh (cháº³ng háº¡n nhÆ° 192.168.1.1). Má»™t Ä‘á»‹a chá»‰ IP Ä‘Æ°á»£c cung cáº¥p cho má»—i thiáº¿t bá»‹ trÃªn Internet vÃ  Ä‘á»‹a chá»‰ Ä‘Ã³ lÃ  cáº§n thiáº¿t Ä‘á»ƒ tÃ¬m thiáº¿t bá»‹ Internet phÃ¹ há»£p. Giá»‘ng nhÆ° má»™t Ä‘á»‹a chá»‰ Ä‘Æ°á»ng phá»‘ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m má»™t ngÃ´i nhÃ  cá»¥ thá»ƒ.
- Khi ngÆ°á»i dÃ¹ng muá»‘n táº£i má»™t trang web, má»™t báº£n dá»‹ch pháº£i xáº£y ra giá»¯a nhá»¯ng gÃ¬ ngÆ°á»i dÃ¹ng nháº­p vÃ o trÃ¬nh duyá»‡t web cá»§a há» (example.com) vÃ  Ä‘á»‹a chá»‰ thÃ¢n thiá»‡n vá»›i mÃ¡y cáº§n thiáº¿t Ä‘á»ƒ Ä‘á»‹nh vá»‹ trang web example.com.
- Náº¿u mÃ¡y chá»§ DNS cá»¥c bá»™ khÃ´ng cÃ³ Ä‘á»‹a chá»‰ IP cá»§a website, nÃ³ sáº½ há»i mÃ¡y chá»§ DNS gá»‘c. MÃ¡y chá»§ DNS gá»‘c sáº½ tráº£ vá» Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§ DNS cáº¥p cao nháº¥t cho website.
- MÃ¡y chá»§ DNS cáº¥p cao nháº¥t sáº½ tráº£ vá» Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§ DNS quáº£n lÃ½ website. MÃ¡y chá»§ DNS quáº£n lÃ½ sáº½ tráº£ vá» Ä‘á»‹a chá»‰ IP cá»§a trang web cho mÃ¡y chá»§ DNS cá»¥c bá»™.
- Cuá»‘i cÃ¹ng, mÃ¡y chá»§ DNS cá»¥c bá»™ sáº½ tráº£ vá» Ä‘á»‹a chá»‰ IP cá»§a trang web cho mÃ¡y tÃ­nh cá»§a ngÆ°á»i dÃ¹ng. MÃ¡y tÃ­nh cá»§a ngÆ°á»i dÃ¹ng sáº½ sá»­ dá»¥ng Ä‘á»‹a chá»‰ IP nÃ y Ä‘á»ƒ káº¿t ná»‘i vá»›i website.

  # CÃ¡c loáº¡i DNS báº£n ghi DNS thÆ°á»ng sá»­ dá»¥ng
  Hiá»‡n nay, DNS cÃ³ báº£y loáº¡i báº£n ghi, bao gá»“m:

- CNAME Record: LÃ  má»™t báº£n ghi tÃªn quy chuáº©n (Canonical Name Record). ÄÃ¢y lÃ  má»™t dáº¡ng báº£n ghi tÃ i nguyÃªn trong há»‡ thá»‘ng tÃªn miá»n.
- A Record: DÃ¹ng Ä‘á»ƒ trá» tÃªn miá»n website tá»›i má»™t Ä‘á»‹a chá»‰ IP cá»¥ thá»ƒ. ÄÃ¢y Ä‘Æ°á»£c xem lÃ  báº£n ghi DNS Ä‘Æ¡n giáº£n nháº¥t.
- MX Record: Báº£n ghi nÃ y báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ trá» tÃªn miá»n Ä‘áº¿n mail server. MX Record chá»‰ Ä‘á»‹nh server nÃ o quáº£n lÃ½ cÃ¡c dá»‹ch vá»¥ Email cá»§a tÃªn miá»n Ä‘Ã³.
- AAAA Record: DÃ¹ng Ä‘á»ƒ trá» tÃªn miá»n Ä‘áº¿n Ä‘á»‹a chá»‰ IPv6 vÃ  cho phÃ©p thÃªm host má»›i, TTL vÃ  IPv6.
- TXT Record: NgoÃ i ra, cÃ³ thá»ƒ thÃªm giÃ¡ trá»‹ TXT, Host má»›i, TTL vÃ  Point To Ä‘á»ƒ chá»©a cÃ¡c thÃ´ng tin Ä‘á»‹nh dáº¡ng vÄƒn báº£n domain.
- SRV Record: ÄÃ¢y lÃ  báº£n ghi DNS Ä‘áº·c biá»‡t, dÃ¹ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh chÃ­nh xÃ¡c dá»‹ch vá»¥ nÃ o Ä‘ang cháº¡y Port nÃ o. VÃ  thÃ´ng qua báº£n ghi nÃ y báº¡n cÃ³ thá»ƒ thÃªm Priority, Port, Weight, TTL, Point to Point.
- NS Record: Báº£n ghi nÃ y cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh Name Server cho tá»«ng tÃªn miá»n phá»¥ vÃ  bÃªn cáº¡nh Ä‘Ã³ cÃ³ thá»ƒ táº¡o tÃªn Name Server, TTL hay host má»›i.

  # CÃ¡c loáº¡i DNS Server
DNS Server gá»“m hai loáº¡i lÃ  Root Name Server vÃ  Local Name Server.
 ## Root Name Server
 Root Name Server lÃ  má»™t dá»‹ch vá»¥ phÃ¢n giáº£i tÃªn miá»n gá»‘c vÃ  trÃªn tháº¿ giá»›i cÃ³ khoáº£ng 12 DNS root Server.

DNS root Server quáº£n lÃ½ táº¥t cáº£ cÃ¡c tÃªn miá»n Top-level. Khi cÃ³ yÃªu cáº§u phÃ¢n giáº£i má»™t Domain Name thÃ nh má»™t Ä‘á»‹a chá»‰ IP, client sáº½ gá»­i yÃªu cáº§u Ä‘áº¿n DNS gáº§n nháº¥t (DNS ISP). DNS ISP sáº½ káº¿t ná»‘i tá»›i DNS root Server Ä‘á»ƒ há»i Ä‘á»‹a chá»‰ cá»§a Domain Name.

DNS root Server sáº½ cÄƒn cá»© vÃ  dá»±a vÃ o cÃ¡c Top Level cá»§a tÃªn miá»n vÃ  tá»« Ä‘Ã³ cÃ³ nhá»¯ng tÃ i liá»‡u hÆ°á»›ng dáº«n phÃ¹ há»£p Ä‘á»ƒ chuyá»ƒn hÆ°á»›ng cho khÃ¡ch hÃ ng Ä‘áº¿n Ä‘Ãºng Ä‘á»‹a chá»‰ cáº§n truy váº¥n.

## Local Name Server
DNS Server nÃ y dÃ¹ng Ä‘á»ƒ chá»©a thÃ´ng tin Ä‘á»ƒ truy xuáº¥t vÃ  tÃ¬m kiáº¿m mÃ¡y chá»§ tÃªn miá»n. VÃ  thÆ°á»ng Ä‘Æ°á»£c duy trÃ¬ vÃ  phÃ¡t triá»ƒn bá»Ÿi cÃ¡c doanh nghiá»‡p hay cÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ Internet.
## DNS Recursor
DNS Recursor lÃ  má»™t mÃ¡y chá»§ cÃ³ nhiá»‡m vá»¥ chuyá»ƒn Ä‘á»•i tÃªn miá»n thÃ nh Ä‘á»‹a chá»‰ IP. ÄÆ°á»£c hoáº¡t Ä‘á»™ng nhÆ° má»™t thÆ° viá»‡n, lÆ°u trá»¯ thÃ´ng tin vá» Ä‘á»‹a chá»‰ IP cá»§a cÃ¡c trang web vÃ  á»©ng dá»¥ng. Khi ngÆ°á»i dÃ¹ng nháº­p má»™t tÃªn miá»n, DNS Recursor sáº½ tÃ¬m kiáº¿m thÃ´ng tin Ä‘Ã³ trong cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»§a mÃ¬nh. Náº¿u khÃ´ng tÃ¬m tháº¥y, nÃ³ sáº½ liÃªn há»‡ vá»›i cÃ¡c DNS Recursor khÃ¡c Ä‘á»ƒ tÃ¬m kiáº¿m. DNS Recursor cÅ©ng sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m Ä‘á»ƒ lÆ°u trá»¯ thÃ´ng tin vá» cÃ¡c tÃªn miá»n mÃ  nÃ³ Ä‘Ã£ tá»«ng truy cáº­p. Äiá»u nÃ y giÃºp tÄƒng tá»‘c Ä‘á»™ pháº£n há»“i cho cÃ¡c truy váº¥n trong tÆ°Æ¡ng lai.
## TLD Name Server
TLD Name Server lÃ  mÃ¡y chá»§ tÃªn miá»n cáº¥p cao nháº¥t, chá»‹u trÃ¡ch nhiá»‡m lÆ°u trá»¯ thÃ´ng tin vá» cÃ¡c tÃªn miá»n cÃ³ pháº§n má»Ÿ rá»™ng chung (gTLD), cháº³ng háº¡n nhÆ° .com, .org, .net. Trong quÃ¡ trÃ¬nh tÃ¬m kiáº¿m Ä‘á»‹a chá»‰ IP, mÃ¡y chá»§ Ä‘á»‹nh danh sáº½ liÃªn há»‡ vá»›i TLD Name Server Ä‘á»ƒ láº¥y thÃ´ng tin vá» tÃªn miá»n.
## Authoritative Name Server
Authoritative Name Server lÆ°u trá»¯ thÃ´ng tin vá» tÃªn miá»n vÃ  Ä‘á»‹a chá»‰ IP tÆ°Æ¡ng á»©ng. LÃ  Ä‘iá»ƒm cuá»‘i cá»§a quÃ¡ trÃ¬nh truy váº¥n vÃ  phÃ¢n giáº£i Ä‘á»‹a chá»‰ IP cáº§n thiáº¿t cho DNS Recursor.

# CÃ¡ch sá»­ dá»¥ng DNS
Náº¿u báº¡n sá»­ dá»¥ng DNS cá»§a nhÃ  cung cáº¥p máº¡ng thÃ¬ báº¡n sáº½ khÃ´ng cáº§n Ä‘iá»n Ä‘á»‹a chá»‰ DNS. NhÆ°ng náº¿u trÆ°á»ng há»£p báº¡n sá»­ dá»¥ng DNS khÃ¡c, thÃ¬ báº¡n pháº£i Ä‘iá»n Ä‘á»‹a chá»‰ cá»¥ thá»ƒ cá»§a mÃ¡y chá»§ Ä‘Ã³ Ä‘á»ƒ thay Ä‘á»•i DNS Server:

BÆ°á»›c 1: Nháº¥n vÃ o Start Menu > GÃµ Control Panel > Chá»n Control Panel.

BÆ°á»›c 2: Truy cáº­p vÃ o View network status and task.

BÆ°á»›c 3: Truy cáº­p vÃ o máº¡ng Internet Ä‘ang sá»­ dá»¥ng.

BÆ°á»›c 4: VÃ o pháº§n Properties Ä‘á»ƒ báº¯t Ä‘áº§u thay Ä‘á»•i DNS mÃ¡y tÃ­nh.

BÆ°á»›c 5: Chá»n vÃ o Internet Protocol Version 4.

BÆ°á»›c 6: Chá»n Use the following DNS server addresses > Äá»•i DNS nháº¥n OK Ä‘á»ƒ hoÃ n táº¥t cÃ¡c bÆ°á»›c thiáº¿t láº­p.

# KhÃ¡c biá»‡t giá»¯a Public DNS vÃ  Private DNS
| Äáº·c Ä‘iá»ƒm          | Private DNS                          | Public DNS                          |
|--------------------|--------------------------------------|-------------------------------------|
| **Pháº¡m vi**        | Máº¡ng ná»™i bá»™ (LAN)                   | Internet                            |
| **Báº£o máº­t**        | ğŸ”’ Cao (cÃ³ tÆ°á»ng lá»­a báº£o vá»‡)        | ğŸ”“ Tháº¥p hÆ¡n (tiáº¿p xÃºc Internet)     |
| **Truy cáº­p**       | Chá»‰ thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™       | Má»i ngÆ°á»i tá»« Internet               |
| **IP**             | IP ná»™i bá»™ (192.168.x.x, 10.x.x.x...) | IP cÃ´ng cá»™ng (public IP)            |
| **Má»¥c Ä‘Ã­ch**       | Nháº­n dáº¡ng mÃ¡y chá»§/dá»‹ch vá»¥ ná»™i bá»™     | Truy cáº­p dá»‹ch vá»¥ tá»« Internet        |
| **VÃ­ dá»¥**          | Active Directory Domain Services     | Google DNS (8.8.8.8), Cloudflare    |
| **Æ¯u Ä‘iá»ƒm**        | - TÄƒng báº£o máº­t<br>- Quáº£n lÃ½ táº­p trung | - Dá»… truy cáº­p<br>- Phá»¥c vá»¥ Ä‘á»‘i tÆ°á»£ng rá»™ng |
| **NhÆ°á»£c Ä‘iá»ƒm**     | - Chá»‰ dÃ¹ng ná»™i bá»™<br>- Cáº§n cáº¥u hÃ¬nh  | - Rá»§i ro táº¥n cÃ´ng<br>- Lá»™ thÃ´ng tin |
| **á»¨ng dá»¥ng**       | Doanh nghiá»‡p, tá»• chá»©c, trÆ°á»ng há»c    | Web server, Mail server, CDN...     |

# TÃ¬m hiá»ƒu vá» rÃ² rá»‰ DNS
Khi báº¡n káº¿t ná»‘i vá»›i Internet, cÃ³ hai loáº¡i lÆ°u lÆ°á»£ng truy cáº­p chÃ­nh: LÆ°u lÆ°á»£ng truy cáº­p HTTP vÃ  lÆ°u lÆ°á»£ng truy cáº­p DNS. LÆ°u lÆ°á»£ng truy cáº­p HTTP lÃ  lÆ°u lÆ°á»£ng truy cáº­p Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº£i ná»™i dung tá»« trang web, cháº³ng háº¡n nhÆ° vÄƒn báº£n, hÃ¬nh áº£nh vÃ  video. LÆ°u lÆ°á»£ng truy cáº­p DNS lÃ  lÆ°u lÆ°á»£ng truy cáº­p Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m Ä‘á»‹a chá»‰ IP cá»§a trang web mÃ  báº¡n Ä‘ang cá»‘ gáº¯ng truy cáº­p.
Khi báº¡n sá»­ dá»¥ng VPN, lÆ°u lÆ°á»£ng truy cáº­p HTTP cá»§a báº¡n sáº½ Ä‘Æ°á»£c mÃ£ hÃ³a vÃ  Ä‘á»‹nh tuyáº¿n qua mÃ¡y chá»§ VPN. Äiá»u nÃ y giÃºp báº£o vá»‡ quyá»n riÃªng tÆ° cá»§a báº¡n vÃ  ngÄƒn ISP cá»§a báº¡n theo dÃµi hoáº¡t Ä‘á»™ng duyá»‡t web cá»§a báº¡n. Tuy nhiÃªn, náº¿u lÆ°u lÆ°á»£ng truy cáº­p DNS cá»§a báº¡n khÃ´ng Ä‘Æ°á»£c Ä‘á»‹nh tuyáº¿n qua mÃ¡y chá»§ VPN, thÃ¬ ISP cá»§a báº¡n váº«n cÃ³ thá»ƒ tháº¥y cÃ¡c trang web báº¡n Ä‘ang truy cáº­p.

## Táº¡i sao láº¡i xáº£y ra lá»—i rÃ² rá»‰ DNS?

NguyÃªn nhÃ¢n chÃ­nh cá»§a lá»—i rÃ² rá»‰ DNS lÃ  do cáº¥u hÃ¬nh VPN khÃ´ng chÃ­nh xÃ¡c. Lá»—i nÃ y cÃ³ thá»ƒ xáº£y ra trÃªn báº¥t ká»³ há»‡ Ä‘iá»u hÃ nh hoáº·c thiáº¿t bá»‹ nÃ o káº¿t ná»‘i vá»›i VPN.

Khi VPN Ä‘Æ°á»£c cáº¥u hÃ¬nh chÃ­nh xÃ¡c, mÃ¡y tÃ­nh sáº½ sá»­ dá»¥ng DNS cá»§a VPN Ä‘á»ƒ truy váº¥n Ä‘á»‹a chá»‰ IP cá»§a cÃ¡c trang web. Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng lÆ°u lÆ°á»£ng DNS Ä‘Æ°á»£c mÃ£ hÃ³a vÃ  ISP khÃ´ng thá»ƒ theo dÃµi hoáº¡t Ä‘á»™ng trá»±c tuyáº¿n cá»§a ngÆ°á»i dÃ¹ng.

Tuy nhiÃªn, náº¿u VPN Ä‘Æ°á»£c cáº¥u hÃ¬nh khÃ´ng chÃ­nh xÃ¡c, lÆ°u lÆ°á»£ng DNS cÃ³ thá»ƒ thoÃ¡t khá»i Ä‘Æ°á»ng háº§m VPN vÃ  Ä‘Æ°á»£c gá»­i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ DNS cá»§a ISP. Äiá»u nÃ y khiáº¿n cho ISP cÃ³ thá»ƒ tháº¥y Ä‘Æ°á»£c cÃ¡c trang web mÃ  ngÆ°á»i dÃ¹ng Ä‘ang truy cáº­p.

# CÃ¡ch kiá»ƒm tra vÃ  kháº¯c phá»¥c lá»—i rÃ² rá»‰ DNS
Kiá»ƒm tra rÃ² rá»‰ DNS tá»« trÃ¬nh duyá»‡t

CÃ¡c dá»‹ch vá»¥ VPN hiá»‡n nay thÆ°á»ng cung cáº¥p cÃ¡c cÃ´ng cá»¥ riÃªng Ä‘á»ƒ giÃºp ngÆ°á»i dÃ¹ng kiá»ƒm tra lá»—i rÃ² rá»‰ DNS. DNSleaktest.com lÃ  cÃ´ng cá»¥ Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ tá»‘t nháº¥t hiá»‡n nay. CÃ´ng cá»¥ nÃ y cÃ³ cÃ¡ch sá»­ dá»¥ng Ä‘Æ¡n giáº£n, chá»‰ cáº§n thá»±c hiá»‡n má»™t bÃ i kiá»ƒm tra Ä‘á»ƒ biáº¿t cÃ¡c yÃªu cáº§u DNS cÃ³ bá»‹ lá»™ ra ngoÃ i hay khÃ´ng. Káº¿t quáº£ kiá»ƒm tra sáº½ liá»‡t kÃª táº¥t cáº£ cÃ¡c mÃ¡y chá»§, Ä‘á»‹a chá»‰ IP vÃ  chá»§ sá»Ÿ há»¯u mÃ  cÃ´ng cá»¥ nhÃ¬n tháº¥y gá»­i Ä‘áº¿n ngÆ°á»i dÃ¹ng.

Kiá»ƒm tra rÃ² rá»‰ DNS báº±ng Torrent

So vá»›i viá»‡c truy cáº­p thÃ´ng tin lÆ°u lÆ°á»£ng bÃ¬nh thÆ°á»ng, viá»‡c phÃ¡t hiá»‡n rÃ² rá»‰ DNS khi sá»­ dá»¥ng Torrent yÃªu cáº§u pháº£i dÃ¹ng Ä‘áº¿n cÃ¡c pháº§n má»m Ä‘áº·c biá»‡t. Äa sá»‘ ngÆ°á»i dÃ¹ng thÆ°á»ng sá»­ dá»¥ng pMagnet nhÆ° má»™t giáº£i phÃ¡p Ä‘Æ°á»£c Ä‘á» xuáº¥t Ä‘á»ƒ kiá»ƒm tra Ä‘á»‹a chá»‰ IP cá»§a Torrent. Báº±ng cÃ¡ch sá»­ dá»¥ng liÃªn káº¿t Magnet thÃ´ng qua pháº§n má»m nÃ y, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ nhanh chÃ³ng biáº¿t Ä‘Æ°á»£c IP nÃ o mÃ  Torrent Client Ä‘ang sá»­ dá»¥ng.

# CÃ¡c bÆ°á»›c trong tra cá»©u DNS lÃ  gÃ¬?
Trong háº§u háº¿t cÃ¡c tÃ¬nh huá»‘ng, DNS liÃªn quan Ä‘áº¿n má»™t tÃªn miá»n Ä‘Æ°á»£c phÃ¢n giáº£i sang Ä‘á»‹a chá»‰ IP thÃ­ch há»£p. Äá»ƒ tÃ¬m hiá»ƒu cÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cá»§a quy trÃ¬nh nÃ y. NÃ³ giÃºp theo dÃµi quÃ¡ trÃ¬nh tra cá»©u DNS khi nÃ³ di chuyá»ƒn tá»« trÃ¬nh duyá»‡t web. ThÃ´ng qua quy trÃ¬nh tra cá»©u DNS vÃ  quay láº¡i. ChÃºng ta hÃ£y xem cÃ¡c bÆ°á»›c.
BÆ°á»›c 1: Truy váº¥n (Query)
Khi báº¡n nháº­p tÃªn miá»n vÃ o trÃ¬nh duyá»‡t web, trÃ¬nh duyá»‡t sáº½ gá»­i má»™t truy váº¥n DNS Ä‘áº¿n mÃ¡y chá»§ DNS Ä‘Æ°á»£c cáº¥u hÃ¬nh trong cÃ i Ä‘áº·t máº¡ng cá»§a báº¡n hoáº·c Ä‘Æ°á»£c cung cáº¥p tá»± Ä‘á»™ng bá»Ÿi nhÃ  cung cáº¥p dá»‹ch vá»¥ internet (ISP). Truy váº¥n nÃ y bao gá»“m tÃªn miá»n báº¡n muá»‘n truy cáº­p.


BÆ°á»›c 2: Caching
TrÆ°á»›c khi gá»­i truy váº¥n DNS Ä‘áº¿n mÃ¡y chá»§ DNS, trÃ¬nh duyá»‡t sáº½ kiá»ƒm tra bá»™ nhá»› cache DNS Ä‘á»ƒ xem nÃ³ cÃ³ lÆ°u trá»¯ báº£n ghi DNS cho tÃªn miá»n Ä‘Ã³ hay khÃ´ng. Bá»™ nhá»› cache DNS lÃ  nÆ¡i lÆ°u trá»¯ táº¡m thá»i cÃ¡c báº£n ghi DNS Ä‘Ã£ Ä‘Æ°á»£c tra cá»©u trÆ°á»›c Ä‘Ã¢y Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ truy váº¥n DNS.

Náº¿u bá»™ nhá»› cache DNS cÃ³ chá»©a báº£n ghi DNS cho tÃªn miá»n: TrÃ¬nh duyá»‡t sáº½ sá»­ dá»¥ng báº£n ghi Ä‘Ã³ Ä‘á»ƒ truy cáº­p website mÃ  khÃ´ng cáº§n gá»­i truy váº¥n DNS Ä‘áº¿n mÃ¡y chá»§ DNS.
Náº¿u bá»™ nhá»› cache DNS khÃ´ng cÃ³ báº£n ghi DNS cho tÃªn miá»n: TrÃ¬nh duyá»‡t sáº½ gá»­i truy váº¥n DNS Ä‘áº¿n mÃ¡y chá»§ DNS.
BÆ°á»›c 3: MÃ¡y chá»§ DNS chÃ­nh (DNS root server)
Truy váº¥n DNS Ä‘áº§u tiÃªn Ä‘Æ°á»£c gá»­i Ä‘áº¿n mÃ¡y chá»§ DNS chÃ­nh (DNS root server). MÃ¡y chá»§ DNS chÃ­nh lÆ°u trá»¯ thÃ´ng tin vá» mÃ¡y chá»§ DNS cáº¥p cao nháº¥t (TLD) cho tÃªn miá»n Ä‘Æ°á»£c truy váº¥n.

BÆ°á»›c 4: Truy cáº¥n Ä‘áº¿n mÃ¡y chá»§ DNS cáº¥p cao hÆ¡n (Top-level Domain server)
Tiáº¿p theo, trÃ¬nh duyá»‡t sáº½ gá»­i truy váº¥n DNS Ä‘áº¿n mÃ¡y chá»§ DNS cáº¥p cao nháº¥t (TLD server) cho tÃªn miá»n Ä‘Æ°á»£c truy váº¥n. MÃ¡y chá»§ DNS cáº¥p cao nháº¥t lÆ°u trá»¯ thÃ´ng tin vá» mÃ¡y chá»§ DNS cá»¥ thá»ƒ (authoritative DNS server) cho tÃªn miá»n.

BÆ°á»›c 5: Truy váº¥n MÃ¡y chá»§ DNS cá»¥ thá»ƒ (Authoritative DNS server)
Cuá»‘i cÃ¹ng, trÃ¬nh duyá»‡t sáº½ gá»­i truy váº¥n DNS Ä‘áº¿n mÃ¡y chá»§ DNS cá»¥ thá»ƒ (authoritative DNS server) cho tÃªn miá»n Ä‘Æ°á»£c truy váº¥n. MÃ¡y chá»§ DNS cá»¥ thá»ƒ lÆ°u trá»¯ báº£n ghi DNS chÃ­nh thá»©c cho tÃªn miá»n, bao gá»“m Ä‘á»‹a chá»‰ IP cá»§a website.


BÆ°á»›c 6: Truy váº¥n vÃ  pháº£n há»“i
Khi mÃ¡y chá»§ DNS cá»¥ thá»ƒ nháº­n Ä‘Æ°á»£c truy váº¥n DNS, nÃ³ sáº½ tra cá»©u báº£n ghi DNS cho tÃªn miá»n Ä‘Æ°á»£c truy váº¥n trong cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»§a mÃ¬nh. Náº¿u tÃ¬m tháº¥y báº£n ghi DNS, mÃ¡y chá»§ DNS cá»¥ thá»ƒ sáº½ gá»­i pháº£n há»“i DNS cho trÃ¬nh duyá»‡t, bao gá»“m Ä‘á»‹a chá»‰ IP cá»§a website.

# CÃ¡c loáº¡i truy váº¥n DNS

Trong má»™t truy váº¥n DNS thÃ´ng thÆ°á»ng, ba loáº¡i truy váº¥n xáº£y ra. Báº±ng cÃ¡ch sá»­ dá»¥ng káº¿t há»£p cÃ¡c truy váº¥n nÃ y. Má»™t quy trÃ¬nh Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a cho quÃ¡ trÃ¬nh phÃ¢n giáº£i DNS cÃ³ thá»ƒ giÃºp giáº£m khoáº£ng cÃ¡ch di chuyá»ƒn. Trong má»™t tÃ¬nh huá»‘ng lÃ½ tÆ°á»Ÿng, dá»¯ liá»‡u báº£n ghi Ä‘Æ°á»£c lÆ°u trong bá»™ nhá»› cache sáº½ kháº£ dá»¥ng, cho phÃ©p mÃ¡y chá»§ Ä‘á»‹nh danh DNS tráº£ vá» truy váº¥n khÃ´ng Ä‘á»‡ quy.
3 loáº¡i truy váº¥n DNS

Recursive query: DNS client yÃªu cáº§u mÃ¡y chá»§ DNS (thÆ°á»ng lÃ  recursive DNS resolver). Sáº½ tráº£ lá»i mÃ¡y khÃ¡ch báº±ng báº£n ghi tÃ i nguyÃªn Ä‘Æ°á»£c yÃªu cáº§u. Hoáº·c thÃ´ng bÃ¡o lá»—i náº¿u resolver khÃ´ng thá»ƒ tÃ¬m tháº¥y báº£n ghi.
Iterative query: Trong tÃ¬nh huá»‘ng nÃ y, DNS client sáº½ cho phÃ©p mÃ¡y chá»§ DNS tráº£ vá» cÃ¢u tráº£ lá»i tá»‘t nháº¥t cÃ³ thá»ƒ. Náº¿u mÃ¡y chá»§ DNS Ä‘Æ°á»£c truy váº¥n khÃ´ng cÃ³ káº¿t quáº£ trÃ¹ng khá»›p vá»›i tÃªn truy váº¥n. NÃ³ sáº½ tráº£ vá» má»™t giá»›i thiá»‡u Ä‘áº¿n mÃ¡y chá»§ DNS cÃ³ tháº©m quyá»n cho má»©c tháº¥p hÆ¡n. DNS client sau Ä‘Ã³ sáº½ thá»±c hiá»‡n má»™t truy váº¥n Ä‘áº¿n Ä‘á»‹a chá»‰ Ä‘Æ°á»£c giá»›i thiá»‡u. QuÃ¡ trÃ¬nh nÃ y tiáº¿p tá»¥c vá»›i cÃ¡c mÃ¡y chá»§ DNS bá»• sung trong chuá»—i truy váº¥n cho Ä‘áº¿n khi xáº£y ra lá»—i hoáº·c háº¿t thá»i gian.
Non-recursive query: ThÃ´ng thÆ°á»ng Ä‘iá»u nÃ y sáº½ xáº£y ra khi DNS resolver client truy váº¥n mÃ¡y chá»§ DNS má»™t record mÃ  server cÃ³ quyá»n truy cáº­p hoáº·c báº£n ghi tá»“n táº¡i bÃªn trong bá»™ Ä‘á»‡m cá»§a server. ThÃ´ng thÆ°á»ng, má»™t mÃ¡y chá»§ DNS sáº½ lÆ°u cÃ¡c báº£n ghi DNS Ä‘á»ƒ ngÄƒn cháº·n viá»‡c tiÃªu thá»¥ thÃªm bÄƒng thÃ´ng vÃ  giáº£m táº£i cho cÃ¡c mÃ¡y chá»§ DNS khÃ¡c.
TrÃ¬nh duyá»‡t sáº½ sá»­ dá»¥ng Ä‘á»‹a chá»‰ IP nÃ y Ä‘á»ƒ káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§ lÆ°u trá»¯ website vÃ  hiá»ƒn thá»‹ ná»™i dung cho báº¡n.

QuÃ¡ trÃ¬nh nÃ y diá»…n ra ráº¥t nhanh chÃ³ng, chá»‰ trong vÃ i mili giÃ¢y. Nhá» cÃ³ DNS, báº¡n khÃ´ng cáº§n pháº£i nhá»› Ä‘á»‹a chá»‰ IP phá»©c táº¡p cá»§a website mÃ  chá»‰ cáº§n sá»­ dá»¥ng tÃªn miá»n dá»… nhá»›.

# CÃ¡ch DNS Server giáº£i quyáº¿t má»™t DNS query?
Äiá»ƒn hÃ¬nh, trong má»™t DNS query mÃ  khÃ´ng cÃ³ caching, cÃ³ bá»‘n server hoáº¡t Ä‘á»™ng cÃ¹ng nhau Ä‘á»ƒ cung cáº¥p Ä‘á»‹a chá»‰ IP cho client: Recursive Resolvers, Root Nameservers, TLD nameservers, vÃ  Authoritative Nameservers.

DNS recursor (cÃ²n Ä‘Æ°á»£c gá»i lÃ  DNS resolver) lÃ  má»™t mÃ¡y chá»§ nháº­n truy váº¥n tá»« DNS client, sau Ä‘Ã³ tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c DNS server khÃ¡c Ä‘á»ƒ truy tÃ¬m IP chÃ­nh xÃ¡c. Khi resolver nháº­n Ä‘Æ°á»£c yÃªu cáº§u tá»« client, resolver sau Ä‘Ã³ thá»±c sá»± hoáº¡t Ä‘á»™ng nhÆ° má»™t client, truy váº¥n ba loáº¡i DNS server khÃ¡c Ä‘á»ƒ tÃ¬m kiáº¿m Ä‘Ãºng IP.

DNS Lookup
Äáº§u tiÃªn, resolver truy váº¥n root nameservers. Root-server lÃ  bÆ°á»›c Ä‘áº§u tiÃªn trong viá»‡c phÃ¢n giáº£i cÃ¡c tÃªn miá»n cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c thÃ nh Ä‘á»‹a chá»‰ IP. Sau Ä‘Ã³, root server sáº½ pháº£n há»“i láº¡i resolver báº±ng Ä‘á»‹a chá»‰ cá»§a Top Level Domain (TLD) DNS server (cháº³ng háº¡n nhÆ° .com hoáº·c .net) lÆ°u trá»¯ thÃ´ng tin cho cÃ¡c miá»n cá»§a nÃ³.

Tiáº¿p theo, resolver truy váº¥n TLD server. TLD server pháº£n há»“i báº±ng Ä‘á»‹a chá»‰ IP Authoritative Nameserver cá»§a tÃªn miá»n. Sau Ä‘Ã³, recursor sáº½ truy váº¥n authoritative nameserver. Sau Ä‘Ã³ mÃ¡y chá»§ nÃ y sáº½ respond báº±ng Ä‘á»‹a chá»‰ IP cá»§a origin server.

Resolver cuá»‘i cÃ¹ng sáº½ chuyá»ƒn Ä‘á»‹a chá»‰ IP cá»§a origin server trá»Ÿ láº¡i client. Sá»­ dá»¥ng Ä‘á»‹a chá»‰ IP nÃ y, client sau Ä‘Ã³ cÃ³ thá»ƒ báº¯t Ä‘áº§u truy váº¥n trá»±c tiáº¿p Ä‘áº¿n origin server. VÃ  origin server sáº½ pháº£n há»“i báº±ng cÃ¡ch gá»­i dá»¯ liá»‡u trang web cho trÃ¬nh duyá»‡t web Ä‘á»ƒ hiá»ƒn thá»‹.

DNS Caching
NgoÃ i quy trÃ¬nh Ä‘Æ°á»£c nÃªu á»Ÿ trÃªn, recursive resolver cÅ©ng cÃ³ thá»ƒ giáº£i quyáº¿t cÃ¡c truy váº¥n DNS. Báº±ng cÃ¡ch sá»­ dá»¥ng dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trong bá»™ nhá»› cache. Sau khi truy xuáº¥t Ä‘á»‹a chá»‰ IP chÃ­nh xÃ¡c cho má»™t trang web nháº¥t Ä‘á»‹nh. Resolver sáº½ lÆ°u trá»¯ thÃ´ng tin Ä‘Ã³ trong bá»™ nhá»› cache cá»§a nÃ³ trong má»™t khoáº£ng thá»i gian giá»›i háº¡n. Trong khoáº£ng thá»i gian nÃ y, náº¿u báº¥t ká»³ mÃ¡y khÃ¡ch nÃ o khÃ¡c gá»­i yÃªu cáº§u cho tÃªn miá»n Ä‘Ã³, resolver cÃ³ thá»ƒ bá» qua quy trÃ¬nh tra cá»©u DNS thÃ´ng thÆ°á»ng vÃ  chá»‰ cáº§n tráº£ lá»i client báº±ng Ä‘á»‹a chá»‰ IP Ä‘Æ°á»£c lÆ°u trong bá»™ nhá»› cache.

Khi thá»i gian lÆ°u vÃ o bá»™ nhá»› Ä‘á»‡m háº¿t háº¡n, resolver pháº£i truy xuáº¥t láº¡i Ä‘á»‹a chá»‰ IP, táº¡o entry má»›i trong bá»™ nhá»› cache cá»§a nÃ³. Giá»›i háº¡n thá»i gian nÃ y, Ä‘Æ°á»£c gá»i lÃ  thá»i gian tá»“n táº¡i (TTL) Ä‘Æ°á»£c Ä‘áº·t trong DNS Record cho má»—i trang web. ThÃ´ng thÆ°á»ng, thÃ¬ TTL náº±m trong khoáº£ng 24-48 giá». TTL lÃ  cáº§n thiáº¿t vÃ¬ mÃ¡y chá»§ web Ä‘Ã´i khi thay Ä‘á»•i Ä‘á»‹a chá»‰ IP cá»§a chÃºng. Do Ä‘Ã³, cÃ¡c resolver khÃ´ng thá»ƒ phÃ¢n phÃ¡t cÃ¹ng má»™t IP tá»« bá»™ nhá»› cache vÃ´ thá»i háº¡n.

# DNS Server bá»‹ lá»—i thÃ¬ Ä‘iá»u gÃ¬ sáº½ xáº£y ra?
DNS Server cÃ³ thá»ƒ bá»‹ lá»—i vÃ¬ nhiá»u lÃ½ do, cháº³ng háº¡n nhÆ° máº¥t Ä‘iá»‡n, táº¥n cÃ´ng máº¡ng vÃ  trá»¥c tráº·c pháº§n cá»©ng. Nhá»¯ng ngÃ y Ä‘áº§u cá»§a Internet, sá»± cá»‘ ngá»«ng hoáº¡t Ä‘á»™ng cá»§a DNS Server cÃ³ thá»ƒ cÃ³ tÃ¡c Ä‘á»™ng ráº¥t lá»›n. Tuy nhiÃªn, ngÃ y nay cÃ³ ráº¥t nhiá»u dá»± phÃ²ng Ä‘Æ°á»£c tÃ­ch há»£p vÃ o DNS.
Trong trÆ°á»ng há»£p DNS server chÃ­nh bá»‹ ngá»«ng hoáº¡t Ä‘á»™ng, má»™t sá»‘ ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ gáº·p pháº£i sá»± cháº­m trá»… do lÆ°á»£ng yÃªu cáº§u Ä‘Æ°á»£c xá»­ lÃ½ bá»Ÿi cÃ¡c server dá»± phÃ²ng. NhÆ°ng sáº½ máº¥t má»™t lÆ°á»£ng lá»›n DNS khiáº¿n má»™t pháº§n Ä‘Ã¡ng ká»ƒ Internet khÃ´ng kháº£ dá»¥ng. (Äiá»u nÃ y thá»±c sá»± xáº£y ra vÃ o nÄƒm 2016 khi nhÃ  cung cáº¥p DNS Dyn tráº£i qua má»™t trong nhá»¯ng cuá»™c táº¥n cÃ´ng DDoS lá»›n nháº¥t trong lá»‹ch sá»­).

# NguyÃªn nhÃ¢n DNS dá»… bá»‹ táº¥n cÃ´ng?
VÃ¬ há»‡ thá»‘ng tÃªn miá»n khÃ¡ phá»©c táº¡p vÃ  ngÆ°á»i táº¥n cÃ´ng cÃ³ thá»ƒ táº­n dá»¥ng Ä‘iá»ƒm yáº¿u trong DNS Ä‘á»ƒ táº¥n cÃ´ng vá»›i nhiá»u phÆ°Æ¡ng thá»©c khÃ¡c nhau. Äa sá»‘ cÃ¡c cuá»™c táº¥n cÃ´ng Ä‘á»u táº­p trung vÃ o viá»‡c láº¡m dá»¥ng DNS Ä‘á»ƒ ngÄƒn ngÆ°á»i dÃ¹ng khÃ´ng thá»ƒ truy cáº­p vÃ o Internet.
BÃªn cáº¡nh Ä‘Ã³, DNS cÅ©ng cÃ³ thá»ƒ bá»‹ táº¥n cÃ´ng báº±ng phÆ°á»›ng phÃ¡p táº­n dá»¥ng giao thá»©c DNS Ä‘á»ƒ chuyá»ƒn hÆ°á»›ng ngÆ°á»i dÃ¹ng truy cáº­p vÃ o cÃ¡c trang web Ä‘á»™c háº¡i nháº±m Ä‘Ã¡nh cáº¯p dá»¯ liá»‡u nháº¡y cáº£m cá»§a cÃ¡ nhÃ¢n, doanh nghiá»‡p.

NgoÃ i ra, viá»‡c sá»­ dá»¥ng server Ä‘á»‡ quy sáº½ lÆ°u pháº£n há»“i vÃ o bá»™ nhá»› táº¡m Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cá»§a cÃ¡c truy váº¥n tiáº¿p theo. Nháº±m giáº£m sá»‘ lÆ°á»£ng request thÃ´ng tin, nhÆ°ng khÃ¡ nguy hiá»ƒm vÃ  dá»… bá»‹ táº¥n cÃ´ng bá»Ÿi Man-In-The-Middle. Nhá»¯ng káº» táº¥n cÃ´ng cÃ³ thá»ƒ truy cáº­p vÃ o Over IP (VoIP) Ä‘á»ƒ Ä‘Ã¡nh cáº¯p thÃ´ng tin, máº¡o danh, trÃ­ch xuáº¥t dá»¯ liá»‡u, thÃ´ng tin,â€¦

